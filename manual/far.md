## Файловый менеджер FAR
   Помню, как в 1995 году отец установил на домашнем ПК Windows 95.  Проснувшись
утром,  я  запустил  компьютер  и  каково  было  моё  удивление,   когда   вместо
стандартного синего экрана запустилась какая-то «игра» с папочками и корзинками.
Помню, как я злился, от того, что не могу зайти обратно в привычную операционную
систему с синим экраном. Так я отвык от Norton Commander-а.

## Базовые настройки
### Ретранслитерация набранного текста с русского на английский алфавит
Функция установлена в FAR по-умолчанию. 
Для активации необходимо записать один из макросов горячих клавиш (например Far\Addons\XLat\Russian\AltR.lua) в папку 
\Profile\Macros\scripts
Для замены соответствия букв необходимо пересапоставить их в файле Far\Addons\XLat\Russian\Qwerty.farconfig

	<setting key="XLat" name="Table1" type="text" value="АБВГДЕЖЗИЙКЛМНОПРСТУФХЦШЩЫЬЯабвгдежзийклмнопрстуфхцшщыья" /> <!-- Non-english symbols -->
        <setting key="XLat" name="Table2" type="text" value="ABWGDEVZIJKLMNOPRSTUFHC{}YXQabwgdevzijklmnoprstufhc[]yxq" /> <!-- English symbols -->


После этого запустить команду для обновления настроек Far.exe /import Qwerty.farconfig
Для отключения автоматического переключения системной раскладки после ретранслитерации
необходим заменить параметр в строке <setting key="XLat" name="Flags" type="qword" value="0000000000010001" />
с 0000000000010001 на 0000000000010002.

### Подписи линейки функциональных клавиш
Замена подписей функциональных кловиш осуществляется с помощью файла Addons\SetUp\KeyBarLabels.farconfig
Для применения измнений запустить команду для обновления настроек Far.exe /import KeyBarLabels.farconfig

	<setting key="KeyBarLabels.Russian.Shell" name="F1" type="text" value="Справка" />
        <setting key="KeyBarLabels.Russian.Shell" name="F2" type="text" value="Команды" />
        <setting key="KeyBarLabels.Russian.Shell" name="F9" type="text" value="Меню" />
        <setting key="KeyBarLabels.Russian.Shell" name="ShiftF1" type="text" value="Архив" />
        <setting key="KeyBarLabels.Russian.Shell" name="ShiftF4" type="text" value="Создать" />
        <setting key="KeyBarLabels.Russian.Editor" name="F3" type="text" value="Расположен" />
        <setting key="KeyBarLabels.Russian.Editor" name="F9" type="text" value="Орфография" />

### Редактор конфигурации
Запуск редактора конфигурации осуществляется из командной строки по команде far:config
Чтобы файлы всегда создавались без BOM, можно задать специальный параметр Editor.AddUnicodeBOM = false


## Почему я стал использовать FAR
   В 2021 году я решил максимально использовать клавиатуру, чтобы не отвлекаться
на мышку и не тратить драгоценное время на перетаскивание файликов из папочки  в
папочку. Постоянное перетаскивание файлов  и  блуждание  по  папкам  очень  меня
нервировали в то время. Хотелось минимализма и простоты. Тогда  я  вспомнил  про
старый добрый Norton Commander, а вернее его реинкорнацию —  FAR  Manager.  Весь
январь 2021 года я переучивался использовать его вместо стандартного  проводника
и стал перемещаться по директориям и  перемещать  файлы  с  невиданной  до  того
скоростью. Простота и минимализм FAR-а, в сочетании  с  ностальгией  о  детстве
покорили меня. Вскоре  я  понял,  что  FAR  можно  использовать  не  только  как
стандартный  файловый  менеджер,  но  и  как  стандартный  текстовый   редактор,
стандартный плеер, просмоторщик изображений и пр.

### Параметры — Режим панели файлов

	 ╔══════════════════════════════ Полный ══════════════════════════════╗
	 ║ Имя                                                                ║
	 ║                                                                    ║
	 ║ Типы колонок                     Типы колонок строки статуса       ║
	 ║ NO,DMB,SEF,Z                     DC,NRN,X,Z,O                      ║
	 ║ Ширина колонок                   Ширина колонок строки статуса     ║
	 ║ 0,0,5,20%                        14,50%,4,0,0                      ║
	 ╟────────────────────────────────────────────────────────────────────╢
	 ║ [ ] Полноэкранный режим                                            ║
	 ║ [x] Выравнивать расширения файлов                                  ║
	 ║ [ ] Выравнивать расширения папок                                   ║
	 ║ [ ] Показывать папки заглавными буквами                            ║
	 ║ [ ] Показывать файлы строчными буквами                             ║
	 ║ [ ] Показывать имена файлов из заглавных букв строчными буквами    ║
	 ╟────────────────────────────────────────────────────────────────────╢
	 ║                   { OK } [ Сбросить ] [ Отмена ]                   ║
	 ╚════════════════════════════════════════════════════════════════════╝

## Необходимые плагины
   Как  и   многие   другие   программы,   разрабатываемые   энтузиастами,   FAR
устанавливается без лишних примочек в чистом  виде,  а  все  необходимые  плагины
необходимо устанавливать самому.  Большинство  пользователей  останавливается  в
освоении FARа на стадии непонимания  того,  как  сделать  из  этого  привета  из
далёкого прошлого программу, которая могла бы  заменить  стандартный  пoровдник.
Кроме плагинов в  FARе  устанавливаются  всевозможные  макросы,  упрощающие  его
использование. Сперва перечислю плагины, которые использую я.


### Избранные плагины

#### Hexitor
Просмотр файлов в двоичном формате. Отображаемые компьютером буквы определяются
им на основе предустановленных кодировок и могут быть не верно определены.
Просмотр файлов в двоичном формате решает эту насущную проблему.

#### FarRemoteControl
Открытие папок с файлами и обнаружение файлов в FAR по ссылке из других приложений.

#### ESC
Умная авто-свертка текста. В отличие от штатной авто-свертки, позволяет
выравнивать текст по ширине строки (пробелами), систематизировать отступы,
в зависимости от формата файла.

#### LUA Format Block
Плагин позволяет форматировать абзацы,  выравнивая  текст  по  правому
краю, левому краю, по середине, по ширине (последняя строка по  левому
краю), по  ширине  (включая  последнюю  строку),  при  этом  позволяет
обнаруживать абзацы по новой строке, по пустой строке, по отступу.
То же самое, что и ESC, но с диалогом настройки и для уже набранного текста.

	╔════════════ Форматирование блока ═════════════╗
	║ Левая граница  1                              ║
	║ Первая строка  4                              ║
	║ Правая граница 80                             ║
	╟───────────────────────────────────────────────╢
	║ Выравнивание         Обнаружение абзацев      ║
	║   ( ) По левой          ( ) Выкл              ║
	║   ( ) По правой         ( ) Каждая строка     ║
	║   ( ) По центру         ( ) По пустой строке  ║
	║   (•) По ширине         ( ) По отступу        ║
	║   ( ) Полностью         (•) Отступ и строка   ║
	╟───────────────────────────────────────────────╢
	║      [ ] Пустая строка после параграфа        ║
	╟───────────────────────────────────────────────╢
	║               { Ok } [ Отмена ]               ║
	╚═══════════════════════════════════════════════╝

#### Review
Позволяет просматривать изображения в 3 режимах:
- полноэкранный просмотр
- быстрый полуэкранный просмотр
- эскизный просмотр

Упрощает поиск нужных фотографий и их упорядочивание.

Приемущества относительно JPEGView:
1. Порядок фотографий определяется порядком просмотра файлов в FAR (по имени или по дате и пр.)
2. Эксизный и быстрый просмотр прямо из FAR

При просмотре фотографий можно присваивать им метки с помощью клавиш для дальнейшей сортировки.

#### FarColorer
Раскраска файлов в редакторе в зависимости от расширения.
Упрощает идентификацию элементов кода или разметки, способствует быстрому чтению файлов.
Можно создавать собственные правила раскраски, например чтобы подсвечивались определенные ключевые слова в тексте.

#### Really Quick Player - плеер для воспроизведения mp3 файлов. Имеет  лаконичное
окно проигрывания и позволяет воспроизводить автоматически все песни из папки.
Для чтобы файл mp3 открывался плагином Really Quick Player, а не системным пле
ером, В ассоциации для *.mp3 укажи строку rqp:"!.!"

	╔════════════════════ 05 - Carry You Home.mp3 ════════════════[]═╗
	║                                                                  ║
	║      0:05.747 [=|----------------------------------------------] ║
	║                                                                  ║
	║  <   ║   >   ■   Демо   Авто-След.    .....::____  L=====C=====R ║
	║                                                                  ║
	║ Circa Waves - Carry You Home - Never Going Unde                  ║
	║ MP3, 44100 Hz, 2 ch, 325 kbps, 3:19.066                          ║
	║  Внеш. плеер                                                     ║
	╚══════════════════════════════════════════════════════════════════╝


#### VisualCompare
Визуальное сравнение файлов и каталогов
Плагин предназначен для сравнения каталогов и текстовый файлов. Результаты
сравнения отображаются в виде наглядного двухколоночного списка, в котором
все различия выделены цветом.

Очень удобно сравнивать два файла, чтобы обнаружить все различия в них или две папки.

#### ClipCopy
Позволяет копировать, вставлять и вырезать файлы на панелях как это делается в Проводнике — сочетаниями Упр+ц, упр+ж, упр+ь
Удобно использовать для копирования файлов в тело письма.

#### VisRen
Визуальное переименование файлов
Плагин для наглядного переименования файлов по опредеренному шаблону, содержащему такие переменные файла, как дата или методанные

#### MoreHistory
Плагин расширяет стандартную историю папок FAR. Обладает рядом дополнительных возможностей.
Позволяет быстро открывать файл или папку, просто начиная печатать их названия.
Таким образом, отпадает необходимость в создании ярлыков или меню с избранными папками или файлами.

#### LuaFAR Search
Продвинутый поиск и замена в редакторе или панелях
- поддержка разных регулярных выражений
- поддержка пользовательских скриптов (позволяет сделать быстрый поиск без вывода меню)
- многострочная замена (позволяет сделать нумирацию выделенного списка)
- поиск определенного слова в файлах и формирование файла с результатом этого поиска

#### Disk Menu Editor
Редактор меню выбора диска (Alt+F1 / Alt+F2)
Плагин позволяет управлять дополнительными пунктами
в меню выбора дисков.

Удобно быстро переходить к избранным папкам через меню выбора диска.

Кроме плагинов в FARе используются скрипты написаные на языке lua, которые можно разделить на группы.

- скрипты-плагины (большие скрипты, не уступающие по функционалу плагинам)
- скрипты для управления и дополнения плагинов
- скрипты для замены определенного клавиатурного сочетания или сразу нескольких сочетаний

Скрипты можно запускать
- горячими клавишами
- через меню выбора скриптов
- через командное меню
- через командную строку
- через выпадающую (на любых режимах) командную строку для вызова скриптов

### Скрипты-плагины
#### Aliases
Позволяет задавать псевдонимы для командной строки для перехода к необходимым папкам, файлам или выполнению определенных действий

#### ViewColor
Раскрашивает файл в режиме просмотра

#### LuaSpell
Проверка орфографии в редакторе

#### MouseSelect
Поведение мышки в редакторе как в стандартных текстовых редакторах Window

#### WordComplete
Автозавершение слов на основе ранее написанного
Очень удобный скрипт, позволяющий экономить много времени при записи текста

### [LuaSpell](https://github.com/Raidar/LuaSpell/tree/master) — проверка орфографии в редакторе
После включения (посредствам горячей клавиши) подсвечивает не корректные слова.
Для установки необходимо:
1. Записать файл LuaSpell.lua в папку \Profile\Macros\scripts\
2. Сохранить словари ru_RU.dic, ru_RU.aff в папку \Profile\Dictionaries
3. Сохранить исполняемые файлы F:\Far\hunspellx64.dll и F:\Far\hunspellx86.dll в корень папки FAR
4. Сохранить файлы hunspell.lua и userdict.lua в папку \Profile\Macros\modules\
5. Создать пользовательский словарь исключений в папке \Profile\Dictionaries под названием
User_Dict.dic и с следующей структурой:
	
		OOoUserDict1
		lang: rus
		type: positive
		---
		Абракадабра 
		Броведено

6. В файле добавить LuaSpell.lua:  

		lng = "rus",
		desc = "OOoUserDict",
		Type = "UserDict",
		WordType = "enabled",
		StrToPath = false,
		path = DictionaryPath,
		filename = "User_Dict",
		match = DicMatch,
		Enabled = true,
		BreakOnMatch = true,

Для подсветки задать цвет:

	ForegroundColor = 0xFF00000F,
	BackgroundColor = 0xFF000004,

Задать горячие клавиши:

	CheckSpell  = "Apps",            -- - проверка текущего слова.
	SwitchCheck = "F9",     		  -- - переключение подсветки ошибочных слов.
	UnloadSpell = "LCtrlLAltShiftF12",  -- - завершение проверки (выгрузка).
	FindNext    = "F16",           --   - следующее ошибочное слово.
	FindPrev    = "ShiftF16",      --   - предыдущее ошибочное слово.

https://kitscenarist.ru/downloads/hunspell/
https://github.com/LibreOffice/dictionaries/tree/master



### LuaFAR Search - продвинутый поиск  в  тексте.  Позволяет  искать  и  заменять
переменные. 
Примеры
1. заменить  все  вхождения  х  в  строках  на
порядковые номера выделяю в редакторе блок. Вызываю диалог замены плагина. Искать: х Заменить на: \R 
Настрока: [x] Регулярное выражение
	
		╔═══════════════════════ Многострочная замена ═══════════════════════╗
		║ Искать:                                                            ║
		║ х                                                                 ↓║
		║ Заменить на:                                                       ║
		║ \R                                                                ↓║
		║     [ ] Режим функции                                              ║
		╟────────────────────────────────────────────────────────────────────╢
		║ [x] Регулярное выражение          Библиотека: Far regex    ↓       ║
		║ [ ] Учитывать регистр             [ ] Файл как строка              ║
		║ [ ] Целые слова                   [ ] Многострочный режим          ║
		║ [ ] Игнорировать пробелы                                           ║
		╟────────────────────────────────────────────────────────────────────╢
		║ [ ] Дополнительно                                                  ║
		║ Начальный код:                    Конечный код:                    ║
		║                                 ↓                                 ↓║
		╟────────────────────────────────────────────────────────────────────╢
		║                { Заменить } [ Подсчёт ] [ Отмена ]                 ║
		╚════════════════════════════════════════════════════════════════════╝

2. Заменить переносы строк в определенных местах на символ
   
		# Кедрова 
		21

Искать `\n+(?=\d)` (найти перенос сроки до цифры идущей следом) заменить на ` | ` в режиме регулярных выражений.
Получаем

		# Кедрова | 21

3. Для редактирования текста из pdf заменить  переносы  строк  после  которых
идут строчные буквы на пробелы `\n+(?=\l)`

### VisRen (Визуальное переименование файлов) - позволяет  переименовывать  файлы
по их внутренним тегам (например по названию и артисту, если файл mp3).

	╔═════════════════════ Визуальное переименование файлов ══════════════════[]╗
	║ Маска для имени файла:                 расширения:                         ║
	║ [a] - [t]                            ↓ [E]                                ↓║
	║ Шаблоны:                                                                   ║
	║ [N]    Имя                    ↓ [+]    [E]    Тип                    ↓ [+] ║
	╟────────────────────────────────────────────────────────────────────────────╢
	║ Найти:                               ↓ [x] Учитывать регистр               ║
	║ Заменить на:                         ↓ [ ] Регулярные выражения            ║
	╟────────────────────────────── имя до - после ──────────────────────────────╢
	║   10 - Hold On.mp3                   │Circa Waves - Hold On.mp3            ║
	║   11 - Living in the Grey.mp3        │Circa Waves - Living in the Grey.mp  ║
	║   07 - Electric City.mp3             │Circa Waves - Electric City.mp3      ║
	║   08 - Want It All Today.mp3         │Circa Waves - Want It All Today.mp3  ║
	║   09 - Golden Days.mp3               │Circa Waves - Golden Days.mp3        ║
	║   01 - Never Going Under.mp3         │Circa Waves - Never Going Under.mp3  ║
	║   02 - Do You Wanna Talk.mp3         │Circa Waves - Do You Wanna Talk.mp3  ║
	║   03 - Hell On Earth.mp3             │Circa Waves - Hell On Earth.mp3      ║
	║   04 - Your Ghost.mp3                │Circa Waves - Your Ghost.mp3         ║
	║   05 - Carry You Home.mp3            │Circa Waves - Carry You Home.mp3     ║
	║   06 - Northern Town.mp3             │Circa Waves - Northern Town.mp3      ║
	╟──────────────────────── √ Протокол переименования ─────────────────────────╢
	║     { Переименовать } [ F6-Откатить ] [ F4-В редакторе ] [ Отменить ]      ║
	╚════════════════════════════════════════════════════════════════════════════╝

### PortaDev plugin — просмотр фотографий с айфона

### LuaShell — запуск макросов из вызываемой отовсюду командной строки (альтернатива горячим клавишам)
Содержит полезные утилиты

#### В редакторе:
lineup_i.lua — выравнивание текста по символам
lineup_pipe.lua — выравнивание таблиц по линиям | | 
grep.lua — паказать все вхождения слова под курсором
dupfighter.lua — удаление дублирующихся строк
expr.lua — вычислениз записанных выражений
lf4ed.lua — сортировка строк, выравнивание текста и пр.
char.lua — таблица символов

#### В панелях:
pfilt.lua — быстрый фильтр по названию  
cdup.lua — переход к родительской папке   
envman.lua — перечень переменных окружения   
disk.lua — быстрый выбор дисков  
dbedit.lua — редактор БД (переменных) плагинов  
cdd.lua — история команд текущего коталога  

## Команды
set /? — справка по функции  
Рекомендуется всегда использовать с командой опцию /d для смены одновременно и 
текущего диска. Например, "cd /d d:\delta".   
echo %cd%  — показать текущий путь  
точка "." обозначает текущий каталог, а две точки ".." - каталог уровнем выше. 
Команда "cd ..\.." указывает, что нужно перейти двумя каталогами выше.   
http://dl.gsu.by/doc/use/ntcmds.htmе  
macro: load - команда перезагрузки макросов  
tmp: - открывает временную панель.  
tmp: < dir /b - выводит на временную панель все файлы и папки активной панели.  
tmp: < dir /b `*.jpg` - выводит на временную панель все файлы с расширением `*.exe` 
активной панели.    
tmp: < dir /b/s/a-d - выводит на временную панель все файлы в текущей папке и всех 
ее подпапках.  
tmp: < dir /b/s/a-d `*.jpg` - выводит на временную панель все файлы в текущей папке и 
всех ее подпапках.  
`tmp: < dir C:\WINDOWS\*.dll`   
whereis: — перейти к файлу  
goto:  — перейти к файлу или папке  
edit: — редактировать файл. edit: < help - отображение вывода команды help в 
редакторе FAR.  
view: — просмотреть файл. view: < help - отображение вывода команды help в 
стандартном вьювере FAR.  
far:regex  — тестирование регулярных выражений  
` edit:<dir` содержимое папки в виде текста  
` edit:<` записать в редакторе результат команды  
` edit:<ipconfig /all` конфигурация сети  

[метасимволы](https://documentation.help/Far-Manager-ru/MetaSymbols.html)
http://xlench.bget.ru/doku.php/tools/far/comline
http://dl.gsu.by/doc/use/ntcmds.htmе

### регулярные выражения
^\s+ пробелы между абзацами  
^\n пробелы между абзацами (пустые строки)  
 \s+ множественные пробелы  
 \n вводы  
яблоки|груши - найти яблоки или груши  
[0-9] числа  

## Настройки интерфейса
Вид окна Полный
типы колонок: NO, DM, SEF, Z ширина: 0, 0, 5, 30% типы колонок строки: DC, A, Z, X

### Ассоциации файлов
#### Внутренний редактор
*.txt, *.md, *.lua, *.ahk, *.bas, *.ini  
edit:"!.!"

#### Рисунки
*.jpg, *.jpeg, *.gif  
"F:\JPEGViewPortable\JPEGViewPortable.exe" "!\!.!"


### Метасимволы
в ассоциированных командах, пользовательском меню и команде "Применить команду":

 !!       символ ‹!›  
 !        Длинное имя файла без расширения  
 !~       Короткое имя файла без расширения  
 !`       Длинное расширение файла без имени (ext)  
 !`~      Короткое расширение файла без имени (ext)  
 !.!      Длинное имя файла с расширением  
 !-!      Короткое имя файла с расширением  
 !+!      Аналогично !-!, но если длинное имя файла утеряно после выполнения 
 команды, Far восстановит его  
 !@!      Имя файла, содержащего имена помеченных файлов  
 !$!      Имя файла, содержащего короткие имена помеченных файлов  
 !&       Список помеченных файлов  
 !&~      Список помеченных файлов с короткими именами  
 !:       Текущий диск в формате "C:". Для сетевых каталогов - "\\server\share"  
 !\       Текущий путь  
 !/       Короткое имя текущего пути   
 !=\      Текущий путь с учётом символических ссылок.  
 !=/      Короткое имя текущего пути с учётом символических ссылок.  
 !?!      Описание файла  

 !?<title>?<init>!
 При выполнении команды этот символ заменяется данными, введёнными пользователем. <title> и <init> - заголовок и исходный
 текст строки редактирования.
 Допускается использование нескольких таких символов в одной строке, например:
 grep !?Search for:?! !?In:?*.*!|c:\far\Far.exe -v -

 В <title> можно указать имя истории для строки <init>. В этом случае команда имеет следующий формат:
 !?$<history>$<title>?<init>!, например:
 grep !?$GrepHist$Search for:?! !?In:?*.*!|Far.exe -v -


 В <title> и <init> допускается использование прочих метасимволов, заключив их в круглые операторные скобки, например grep
 !?В (!.!) найти:?! |Far.exe -v -.

 !#
 Префикс "!#" заставляет все последующие метасимволы ссылаться на пассивную панель (см. примечание 4). Например, !#!.!
 обозначает имя текущего файла на пассивной панели.

 !^
 Префикс "!^" заставляет все последующие метасимволы ссылаться на активную панель (см. примечание 4). Например, !^!.!
 обозначает имя текущего файла на активной панели, а конструкция !#!\!^!.! - файл на пассивной панели с таким же именем, как
 имя текущего файла на активной панели.

 ![
 "![" prefix forces all subsequent special symbols to refer to the left panel (see note 4). For example, ![!.! denotes a
 current file name on the left panel, ![!\!^!.! - a file on the left panel with the same name as the name of the current
 file on the active panel.

 !]
 "!]" prefix forces all subsequent special symbols to refer to the right panel (see note 4). For example, !]!.! denotes a
 current file name on the right panel, !]!\!^!.! - a file on the right panel with the same name as the name of the current
 file on the active panel.

 Примечания:

 1. Если используемая в ассоциациях программа требует, чтобы имя файла было в кавычках,
    то писать program.exe "!.!", а не program.exe !.!.

 2. Для метасимволов !@! и !$! допускаются следующие модификаторы:
    Q - заключать имена в кавычки;
    S - использовать ‹/› вместо ‹\› в путях файлов;
    F - использовать полный путь;
    A - использовать кодовую страницу ANSI;
    U - использовать кодовую страницу UTF-8;
    W - использовать кодовую страницу UTF-16 (Little endian).

    Например, !@AFQ! - имя файла, содержащего имена помеченных файлов с полным путём в кодовой странице ANSI; имена файлов
    будут заключены в кавычки.

    Для метасимволов !& и !&~ допускаются следующие модификаторы:
    Q - заключать каждое имя в кавычки. Это же поведение по умолчанию, если никакой модификатор не задан.
    q - не заключать имена в кавычки (как это было до сборки 5466).

    Например, !&Q - имена помеченных файлов, заключённые в кавычки.

 3. Метасимволы !@! и !$! в меню выбора (когда задано несколько ассоциаций) и меню пользователя показываются как есть,
    преобразование происходит в момент исполнения команды.

 4. Префиксы "!#", "!^", "![" и "!]" работают как переключатели. Действие этих префиксов распространяется до следующего
    подобного префикса. Например:

    if exist !#!\!^!.! diff -c -p !#!\!^!.! !\!.!

   "Если на пассивной панели существует такой же файл, как и на активной под курсором, то показать расхождения между файлом
   на пассивной панели и файлом на активной панели, независимо от имени текущего файла на пассивной панели"

 5. Если нужно передать программе имя с завершающей обратной чертой, используйте кавычки - "!"\.
    Например, распаковать rar-архив в папку с таким же именем:

    winrar x "!.!" "!"\

    Переместить выделенные файлы в необходимую директорию:
    
	for %i in (!&) do move %i F:\Изображения\