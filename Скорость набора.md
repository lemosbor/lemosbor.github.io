# Исследование скорости нажатия клавиш клавиатуры

## Задачи
1. Определение скорости очередного нажатия 2 клавиш клавиатуры в зависимости от их расположения.

## Методика исследования
Исследование проводится на простой ортогональной клавиатуре Preonic с матрицей клавиш размером 5х12.
В роли испытуемых выступают пользователи-правши разных полов и возрастов без предварительной подготовки к испытанию.  
Испытуемыми поочередно нажимаются разные клавиши разными пальцами в течение 5 секунд. Для каждой пары клавиш исследование повторятся 8 раз. Скорость набора фиксируется ПК, а также высокоскоростной камерой.
Среднее значение полученной скорости заносится в таблицу.

## Анализ результатов исследований

### Движения пальца при нажатии

Движения пальца при нажатии можно разделить на следующие этапы:
1. Перемещение к нужной клавише. 0—50 мс.  Время зависит от удаленности клавиши от основной позиции. Для основной позиции время перемещения равно 0.
2. Размах пальца над клавишией. 15 мс.
3. Нажатие клавиши. 20 мс.
4. Удержание клавиши в нижней мертвой точке. 40 мс.
5. Отпускание клавиши. 30 мс. Скорость нажатия больше, чем скорость отпускания благодаря этапу размаха.
6. Поднятие пальца над клавишей. 15 мс. 

Таким образом нажатие клавиши в основном ряду занимает около 120 мс.

Рассмотрим конкретные примеры нажатий следующей части матрицы клавиш:
	
	 ╭───┬───╮
	 │ Г │ Ш │
	 ├───┼───┤
	 │ О │ Л │
	 ├───┼───┤
	 │ Ь │ Б │
	 ╰───┴───╯
	 
Клавиши `Г` `О` `Ь` нажимаются указательным пальцем правой руки, клавиши `П` `Н` `К` нажимаются безымянным пальцем провой руки.

### Нажатие одной клавиши одним пальцем
Последовательное нажатие одной клавиши (буква О) можно изобразить в виде следующей схемы:
Цифрами 2-6 указаны этапы нажатий, значениями 15-40 указано время этапов в миллисекундах. 240 - суммарное время нажатия двух клавиш. 
	
	   2 ┌──3──┬──4──┬──5──┐ 6  ┌─────┬─────┬─────┐
	 ─15─┤ 20  │ 40  │ 30  ├─30─> 20  │ 40  │ 30  ├─15─>
	     └─────┴──О──┴─────┘    └─────┴──О──┴─────┘
	 |<───────────────────────240──────────────────────>|
	
Итого: 240 мс (Скорость набора: 500 з/м)

Скорость набора в колличестве знаков за одну минуту определяется через время набора одного знака в миллисекундах по следующей зависимости: 

<p id="формула-1" style="text-align: center;">\(С_з = \frac { 60000} {В_з}\), 
<span style="float:right;">(1)</span></p>

## Нажатие близких смежных клавиш одним пальцем

	╔═══╗───┐
	║ Г ║ Ш │
	╠↓═↑╣───┤
	║ О ║ Л │
	╚═══╝───┤
	│ Ь │ Б │
	╰───┴───╯
	
	  2  ┌──3──┬──4──┬──5──┐ 6  ┌─────┬─────┬─────┐
	 ─15─┤ 20  │ 40  │ 30  ├─46─> 20  │ 40  │ 30  ├─32─>
	     └─────┴──О──┴─────┘    └─────┴──Г──┴─────┘
	 |<───────────────────────273──────────────────────>|

Итого: 273 мс (440 з/м).

При нажатии близких смежных клавиш скорость набора замедляется из-за необходимости перемещения пальца на расстояние одной клавиши.

Можно сократить время нажатия смежных клавиш, если разместить их не в одной плоскости _ _ , а под углом друг к другу |_ .
Расположив смежные клавиши таким образом скорость их последовательного набора увеличивается до 700 з/м.
Нажатия производятся перемещением пальца из точки в точку по простой прямой траектории \. Клавиши на плоской клавиатуре нажимаются по сложной траектории похожей на букву П.
Так экономится время на размах и перемещение.

Важно учитывать, что время возврата зависит от того, какая клавиша вводится следующей. Если вводится та же буква, то 
скорость возврата равна не 32, а 30 с. Зависит от вероятности встречи той же клавиши.

## Нажатие дальних клавиш одним пальцем
При изменении угла наглона клавиш (сокращении дистанции перемещения) скорость превышает 510 з/м.

	┏━━━┱───┐
	┃ Г ┃ Ш │
	┡━━━╃───┤
	│ О │ Л │
	┢━━━╆───┤
	┃ Ь ┃ Б │
	┗━━━┵───╯

	   1    2 ┌──3──┬──4──┬──5──┐ 6  ┌─────┬─────┬─────┐
	 ─30───15─┤ 20  │ 40  │ 30  ├─90─> 20  │ 40  │ 30  ├─45─>
		  └─────┴──Г──┴─────┘    └─────┴──Ь──┴─────┘
	 |<───────────────────────────362──────────────────────>|

Итого: 362 мс (331 з/м).

Время перемещения пальца вверх на букву Г  (около 100 мс) больше, чем время перемещения пальца вниз на букву Ь (80 мс) из-за того, что при поднятии палец сперва 
вытягивается, а затем совершает нажатие. При этом нижнее нажатие происходит сходу с передвижения. 

## Промежуточные Выводы
1. Так как время перемещения на расстояние 1 клавиши (50 мс) почти в два раза меньше, чем время самого нажатия, клавиатура должна состоять из
максимального количества клавиш, доступных для набора из основной позиции не дальше, чем на длину одной клавиши (трехрядная клавиатура).

![Охватываемые, без перемещений запястий, клавиши на примере ортолинейной клавиатуры](https://habrastorage.org/r/w1560/getpro/habr/upload_files/3e7/bdb/6e6/3e7bdb6e616b78c5d0559d4d29b4da94.png "Охватываемые, без перемещений запястий, клавиши на примере ортолинейной клавиатуры")

Целесообразность двухрядной клавиатуры может быть обоснована только в случае примемения аккордов, а не дополнительных регистров,
для набора в которых необходимо дополнительное нажатие клавиши смены регистра.

2. Применение аккордов для целей повышения скорости набора оправдано, если следующая набираемая буква набирается пальцем, не учавствующем 
в наборе аккорда.

## Нажатие смежных клавиш двумя пальцами одной руки

	   2 ┌──3──┬──4──┬──5──┐  6
	 ─15─┤ 25  │ 70  │ 35  ├──>
	     └─────┴──О──┴─────┘
		       ┌─────┬─────┬─────┐
		      ─> 25  │ 70  │ 35  ├─15─>
		       └─────┴──Л──┴─────┘
	 |<───────────────240─────────────────>|

Итого: 240 мс (750 з/м).

Время набора одной буквы составляет 160 мс.
Но набор происходит с нахлестом: пока один палец возвращается в исходную позицию, второй палец начинает нажимать вторую клавишу.

Суммарное время набора двух нажимаемых с нахлестом клавиш определяется по зависимости:

<p id="формула-2" style="text-align: center;">\(В_н2 = \frac {В_1} 2 + n \frac { В_1+В_2} 2\), 
<span style="float:right;">(2)</span></p>

<p>где<br>
n — количество повторений;<br>
\(В_1\) — время на нажатие первой клавиши;<br>
\(В_2\) — время на нажатие второй клавиши.</p>

При большом количестве нажатий с нахлестом, удельное время набора двух знаков будет стремиться к зависимости:

<p id="формула-3" style="text-align: center;">\(В_н2 = \frac { В_1+В_2} 2\), 
<span style="float:right;">(3)</span></p>

Соответственно время набора одного из этих знаков будет:

<p id="формула-4" style="text-align: center;">\(В_н1 = \frac { В_1+В_2} 4\), 
<span style="float:right;">(4)</span></p>

Поэтому скорость набора для нажимаемых с нахлестом клавиш в приведенном примере получается:

<p id="формула-5" style="text-align: center;">\(С_з = \frac {60000} {\frac {160+160} 4} = 750\ з/м\), 
<span style="float:right;">(5)</span></p>

Проанализировав скорость набора двух смежных клавиш двумя пальцами одной руки, можно сделать вывод о двух важных эффектах, значительно повышающих скорость набора.

1. Эффект нахлеста (чередования). Чередование пальцев позволяет производить набор с нахлестом нажатий, что удваивает скорость набора (за один промежуток времени нажимается не одна, а две клавиши).

2. Эффект участия в наборе всей руки, а не одного пальца. Высокая скорость нажатия одним пальцем достигается благодаря тому, что в наборе участвует не только палец, но и вся рука.
При наборе двумя пальцами одной руки этот эффект пропадает и время нажатие увеличивается на 25 % с 120 до 160 мс.


## Нажатие клавиш в соседних столбцах двумя пальцами
       
	   1   2 ┌──3──┬──4──┬──5──┐6
	 -37──15─┤ 25  │ 70  │ 35  ├──>
		 └─────┴──Ь──┴─────┘
			┌─────┬─────┬─────┐
		       ─> 25  │ 70  │ 35  ├─15─>
			└─────┴──Ш──┴─────┘
	|<───────────────273──────────────────>|

Итого: 273 мс (659 з/м).

Нажатие по скорости отличается от нажатия О и Л на время первого перемещения (указательного пальца к букве Ь).
Таким образом скорость получется чуть меньше.

Комбинация клавиш Ь-Ш набирается без затруднений, так как длина среднего пальца больше длины указательного 
пальца.  
Нажатие клавиш Г-К получается со скоростью около 645 з/м. Замедленее связано с тем, что движения пальцев на плоскости стандартной и ортолинейной клавиатур
получаются не естественными: указательный палец вытягивается, а средний 
вынужден подгибаться, так что нажатие происходит его ногтем.
Данная проблема не является предметом оптимального расположения клавиш относительно длуг друга, а является проблемма в антропараметрической совместимости стандартной и ортолинейной клавиатуры.
На плоских клавиатурах со сдвинутым вверх столбцом среднего пальца и объмных клавиатурах данный негативный эффект отсутствует.
Учитывая, что неэргономичные клавиатуры являются неперспективными, нет необходимости учитывать замедления пальцев из-за неоптимальной антропараметрической совместимости.

## Нажатие клавиш на разных сторонах

	  2  ┌──3──┬──4──┬──5──┐ 6 
	 ─15─┤ 20  │ 40  │ 30  ├─15─>
	     └─────┴──А──┴─────┘
		    ┌─────┬─────┬─────┐
		   -> 20  │ 40  │ 30  ├─15─>
		    └─────┴──О──┴─────┘
	 |<─────────────180───────────────>|

Итого: 180 мс (1000 з/м).

Нажатие каждой клавиши занимает 120 мс. Как и в первом эксперементе такая скорость достигается за счёт того, что нажатие производится всей рукой.

Поочередные нажатия клавиш на разных сторонах клавиатуры совмещают в себе эффект нахлеста и эффект набора всей рукой, поэтому такие нажатия являются самыми быстрыми.

## Зависимость скорости от пальца
По результатам исследования установлено, что скорость нажатия указательным, средним и безымянным пальцем отличается не значительно. Однако скорость мизинца почти всегда на 10 % меньше остальных пальцев.

## Фактор усталости пальцев
Предельная скорость набора падает, а время набора увеличивается по мере усталости пальца.
Зависимость времени на набор одной клавиши от количества нажатий описыватся следующей логорифмической зависимостью:

<p id="формула-6" style="text-align: center;">\(B_n = B_1 + k_у · log(n)\), 
<span style="float:right;">(6)</span></p>

<p>где<br>
\(B_n\) — время на n-е нажатие, мс; <br>
\(B_1\) — время на первое нажатие, мс;<br>
\(k_у\) — коэффициент усталости, мс;<br>
\(n\) — количество очередных нажатий, ед.</p>

То есть на каждое последующее нажатие занимает время больше предыдущего на значение k_у .

- [ ] график увеличения времени нажатия в зависимости от кол-ва нажатий.

Коэффициент усталости отличается для пальцев. Для указательного пальца он равен 8,7 мс, для мизинца 11,5 мс. То есть мизинец устает быстрее чем указательный палец.
 
## Зависимость скорости от руки
По результатам исследавания установлено, что левая рука для правшей на 10 % медленнее, чем правая.

# Вывод
1. Максимальные скорости достигаются при чередовании рук, а затем пальцев.
2. Мизинцы слабее и медленнее на 10 % остальных пальцев.
3. Левая рука слабее и медленнее на 10 % правой.
4. Все остальные факторы, влиющие на скорость при замерах - субъективны и зависят от антропараметрической совместимости, 
натренированности, усталости.
5. Два пробела, в случае их правильного использования (чередования с набираемыми буквами), позволяют повысить скорость набора:
Скорость набора с одним пробелом (900+700)/2 см/м, скорость набора с двумя пробелами (900+900)/2 см/м, если 
использовать чередования пробела.
6. Полученные результаты по скоростям набора биграмм позволяют определить наиболее быструю для набора компоновку клавиш.

1. Скорость набора зависит от силы пальца. Самая низкая скорость у мизинца, затем у безымянного пальца, а потом у среднего и 
указательного.
2. Пальцы правой руки на 10 % быстрее пальцев левой руки.
зz3. Смещение пальцев на одну клавишу увеличивает время и снижает скорость нажатий на 40 %?
4. Чередование пальцев на одной руке увеличивает скорость на 20 %?
5. Чередование рук при нажатиях увеличивает скорость на 45 %?

## Время набора биграмм
Для удобства расчёта весь набор на клавиатуре можно разделить на минимальные отрезки передвижений пальцев с буквы на букву, 
то есть на биграммы.
Зная частоту биграмм можно перемножить её на время набора.
Время набора клавиш биграмм отличается для разных пальцев.
Две клавиши можно набрать последовательно внахлест, если набирающие их пальцы чередуются и без нахлеста, если клавиши 
набираются одним пальцем.
Так время набора биграммы можно расчитать по следующей зависимости:
Тб = Б'+Б"*(1-Ч)

где Б' и Б" - время набора первой и второй клавиши биграммы по-отдельности, зависящее от положения клавиш и силы пальца.
Ч - коэффициент чередования. Если биграмма набирается разными пальцами, то Ч = 0,5, если одним, то 0.

Время набора слова, состящего из очереди биграмм, можно определить по следующей зависимости:
	
	
Тс = Б"1*(1-Ч) + Б"2*(1-Ч) + ... + Б"н*(1-Ч)

Б"1 - время набора второй клавиши первой биграммы.

Таким образом, для расчёта набора слов необходимо складывать время набора второй буквы биграммы, из которой она состоит и 
перемножать это время на коэффициент чередования.

Первая клавиша первой биграммы в слове, это пробел, также как и вторая клавиша последней биграммы. таким образом,  на 
каждое слово приходится по половине пробела.

Время набора второй клавиши биграммы Б" складывается из времени на перемещение к этой клавише (если она не на основном 
ряду), времени на разгон для нажима, нажима, удержания, отпускании и возврата.
